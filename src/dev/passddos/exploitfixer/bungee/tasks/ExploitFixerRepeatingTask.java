package dev._2lstudios.exploitfixer.bungee.tasks;

import dev._2lstudios.exploitfixer.bungee.managers.ExploitPlayerManager;
import dev._2lstudios.exploitfixer.shared.modules.NotificationsModule;

public class ExploitFixerRepeatingTask implements Runnable {
    private final ExploitPlayerManager exploitPlayerManager;
    private final NotificationsModule notificationsModule;
    int seconds = 0;

    public ExploitFixerRepeatingTask(final ExploitPlayerManager exploitPlayerManager,
            final NotificationsModule notificationsModule) {
        this.exploitPlayerManager = exploitPlayerManager;
        this.notificationsModule = notificationsModule;
    }

    @Override
    public void run() {
        if (seconds > 300) {
            seconds = 0;
            exploitPlayerManager.clear();
        } else {
            if (seconds % 10 == 9) {
                notificationsModule.debugPackets();
            }

            seconds++;
        }
    }
}
